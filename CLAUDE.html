<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Claude Code Assistant Instructions • forestly</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" sizes="any" href="favicon.ico"><link rel="manifest" href="site.webmanifest"><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet"><meta property="og:title" content="Claude Code Assistant Instructions"><meta property="og:image" content="https://merck.github.io/forestly/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">forestly</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="articles/forestly.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/forest-plot-static.html">Generate Static AE Forest Plots</a></li>
    <li><a class="dropdown-item" href="articles/customize-listing-columns.html">Selecting Columns to Display in AE Listings</a></li>
    <li><a class="dropdown-item" href="articles/customize-digits.html">Adjusting Decimal Precision in Displayed Data</a></li>
    <li><a class="dropdown-item" href="articles/customize-color.html">Personalized Color Choices in Data Visualization</a></li>
    <li><a class="dropdown-item" href="articles/customize-ae-specific-columns.html">Add/Hide Columns in the AE-Specific Tables</a></li>
    <li><a class="dropdown-item" href="articles/customize-diff-label.html">Legend Customization in AE Proportion Difference Visualizations</a></li>
    <li><a class="dropdown-item" href="articles/customize-xlimit.html">Customizing Plot Limits for AE Proportions and Differences</a></li>
    <li><a class="dropdown-item" href="articles/customize-width.html">Adjusting Column Widths for Optimal Layout</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Merck/forestly/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.png" class="logo" alt=""><h1>Claude Code Assistant Instructions</h1>
      <small class="dont-index">Source: <a href="https://github.com/Merck/forestly/blob/main/CLAUDE.md" class="external-link"><code>CLAUDE.md</code></a></small>
    </div>

<div id="claude-code-assistant-instructions" class="section level1">

<div class="section level2">
<h2 id="project-overview">Project Overview<a class="anchor" aria-label="anchor" href="#project-overview"></a></h2>
<p>This is the forestly R package, which creates interactive forest plots for clinical trial data analysis. The package is built on top of metalite and metalite.ae packages and uses reactable for interactive tables with Plotly.js for interactive visualizations.</p>
</div>
<div class="section level2">
<h2 id="development-guidelines">Development Guidelines<a class="anchor" aria-label="anchor" href="#development-guidelines"></a></h2>
<div class="section level3">
<h3 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a></h3>
<ul><li>load project using <code>devtools::load_all()</code>
</li>
<li>Run tests using: <code>devtools::test()</code>
</li>
<li>Run specific test files using: <code>devtools::test(filter = "filename")</code>
</li>
<li>Before running tests, ensure required packages are installed (metalite, metalite.ae, reactable, reactR)</li>
</ul></div>
<div class="section level3">
<h3 id="code-style">Code Style<a class="anchor" aria-label="anchor" href="#code-style"></a></h3>
<ul><li>Follow tidyverse style guide</li>
<li>Use <code>|&gt;</code> pipe operator (R 4.1+)</li>
<li>Functions should handle both character vectors and factors robustly</li>
</ul></div>
<div class="section level3">
<h3 id="key-functions">Key Functions<a class="anchor" aria-label="anchor" href="#key-functions"></a></h3>
<ul><li>
<code><a href="reference/ae_forestly.html">ae_forestly()</a></code>: Main function to create interactive forest plots</li>
<li>
<code><a href="reference/format_ae_forestly.html">format_ae_forestly()</a></code>: Formats AE data and configures Plotly visualizations</li>
<li>
<code>format_ae_listing()</code>: Formats AE listing data</li>
<li>
<code>sparkline_point_js()</code>: Generates JavaScript/Plotly code for interactive sparkline plots</li>
<li>
<code>propercase()</code>: Converts strings to proper case (handles factors)</li>
<li>
<code>titlecase()</code>: Converts strings to title case using tools::toTitleCase (handles factors)</li>
</ul></div>
<div class="section level3">
<h3 id="before-committing">Before Committing<a class="anchor" aria-label="anchor" href="#before-committing"></a></h3>
<ul><li>Run linting: Check for any linting issues in the IDE</li>
<li>Run tests: <code>devtools::test()</code> to ensure all tests pass</li>
<li>Check documentation: <code>devtools::document()</code> if roxygen comments are updated</li>
</ul></div>
<div class="section level3">
<h3 id="branch-strategy">Branch Strategy<a class="anchor" aria-label="anchor" href="#branch-strategy"></a></h3>
<ul><li>Main branch: <code>main</code>
</li>
<li>Feature branches: Use descriptive names like <code>fix-factor-handling</code> or <code>add-new-feature</code>
</li>
<li>Always create pull requests for merging into main</li>
</ul></div>
<div class="section level3">
<h3 id="common-commands">Common Commands<a class="anchor" aria-label="anchor" href="#common-commands"></a></h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load all functions for development</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">load_all</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run all tests</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">test</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check package</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">check</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build documentation</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">document</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="package-dependencies">Package Dependencies<a class="anchor" aria-label="anchor" href="#package-dependencies"></a></h2>
<ul><li>metalite</li>
<li>metalite.ae</li>
<li>reactable</li>
<li>reactR</li>
<li>plotly (via JavaScript integration)</li>
<li>brew (for template processing)</li>
<li>tools (base R)</li>
</ul></div>
<div class="section level2">
<h2 id="testing-data">Testing Data<a class="anchor" aria-label="anchor" href="#testing-data"></a></h2>
<p>The package includes test data in <code>data/</code>: - forestly_adae.rda - forestly_adae_3grp.rda - forestly_adsl.rda - forestly_adsl_3grp.rda</p>
</div>
<div class="section level2">
<h2 id="notes-for-future-development">Notes for Future Development<a class="anchor" aria-label="anchor" href="#notes-for-future-development"></a></h2>
<ul><li>The <code>ae_listing.R</code> file contains functions that handle factor inputs, which was a recent fix</li>
<li>Test files should use <code>devtools::load_all()</code> or source the R files directly for testing</li>
<li>The package uses testthat for unit testing framework</li>
<li>Interactive plots use Plotly.js via JavaScript templates in <code>inst/js/</code>
</li>
<li>The y-axis ordering in <code>format_ae_forestly.R</code> affects the visual display in interactive plots</li>
<li>When debugging interactive plot issues, check both R code and JavaScript template files</li>
</ul></div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yilong Zhang, Benjamin Wang, Yujie Zhao, Hiroaki Fukuda. Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3. <br>Copyright © 2023 Merck &amp; Co., Inc., Rahway, NJ, USA and its affiliates. All rights reserved.</p>
</div>

<div class="pkgdown-footer-right">
  <p><span></span></p>
</div>

    </footer></div>





  </body></html>

